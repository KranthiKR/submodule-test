version: 0.2

proxy:
  upload-artifacts: yes
  logs: yes
  
phases:
  install:
    runtime-version: 
      node.js: 12
      python: 3.8
  
  pre_build: 
    commands:
      - env
      - mkdir test
      - cd test
      - echo "TESTING"
     
  build:
    commands:
      - ls -la
      - git submodule init
      - echo $CODEBUILD_WEBHOOK_TRIGGER
      - export BRANCH=$(awk -F / '{print $2}' <<< $CODEBUILD_WEBHOOK_TRIGGER)
      - echo $BRANCH
      
  post_build: 
    commands: 
      - echo "build completed on 'date'"
      - git log --name-only
